/** @jsxImportSource @emotion/react */
import { jsx, css } from "@emotion/react";
import { useIsResponsive } from "@/components/Responsive/useIsResponsive";
import {useState} from 'react'
import { putBookmark } from "@/api/book/putBookmark";
import { putHasBeenRead } from "@/api/book/putHasBeenRead";


import UseAnimations from 'react-useanimations';
// EVERY ANIMATION NEEDS TO BE IMPORTED FIRST -> YOUR BUNDLE WILL INCLUDE ONLY WHAT IT NEEDS
import bookmark from 'react-useanimations/lib/bookmark'
import radioButton from 'react-useanimations/lib/radioButton'








interface ToggleBtnProps {
    isClicked: boolean;
    bookId: number;
}

 export const BookmarkToggle = ({isClicked, bookId}: ToggleBtnProps) => {
    const [isDeskTop, isTablet, isMobile] = useIsResponsive();
    const [bookmarkValue, setBookmarkValue] = useState<boolean>(isClicked)

    const bookmarkHandler = () => {
        putBookmark({bookId})
        .then((res) => {
            if (res !== null) {
                setBookmarkValue(() => res)
            }
        })
    }

    // const bookmarkNotClicked = (
    //     <svg width={isMobile ? '32' : '42'} height={isMobile ? '32' : '42'} viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    //     <path d="M27.3 40.5H14.7C9.59794 40.5 6.41672 39.4704 4.47316 37.5268C2.5296 35.5833 1.5 32.4021 1.5 27.3V14.7C1.5 9.59794 2.5296 6.41672 4.47316 4.47316C6.41672 2.5296 9.59794 1.5 14.7 1.5H27.3C32.4021 1.5 35.5833 2.5296 37.5268 4.47316C39.4704 6.41672 40.5 9.59794 40.5 14.7V27.3C40.5 32.4021 39.4704 35.5833 37.5268 37.5268C35.5833 39.4704 32.4021 40.5 27.3 40.5Z" stroke="var(--text-color)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    //     <mask id="path-2-inside-1_90_309" fill="white">
    //     <path d="M31.5 0.923885V21.8818C31.5 26.0188 28.539 27.6358 24.906 25.4518L22.134 23.7928C21.504 23.4148 20.496 23.4148 19.866 23.7928L17.094 25.4518C13.461 27.6148 10.5 26.0188 10.5 21.8818V0.923885"/>
    //     </mask>
    //     <path d="M34.5 0.923885C34.5 -0.732969 33.1569 -2.07611 31.5 -2.07611C29.8431 -2.07611 28.5 -0.732969 28.5 0.923885H34.5ZM24.906 25.4518L26.4517 22.8806L26.4466 22.8776L24.906 25.4518ZM22.134 23.7928L20.5905 26.3653L20.5934 26.367L22.134 23.7928ZM19.866 23.7928L21.4066 26.367L21.4095 26.3653L19.866 23.7928ZM17.094 25.4518L18.6287 28.0295L18.6346 28.026L17.094 25.4518ZM13.5 0.923885C13.5 -0.732969 12.1569 -2.07611 10.5 -2.07611C8.84315 -2.07611 7.5 -0.732969 7.5 0.923885H13.5ZM28.5 0.923885V21.8818H34.5V0.923885H28.5ZM28.5 21.8818C28.5 22.5703 28.3755 22.9857 28.2741 23.1978C28.2249 23.3007 28.1827 23.3534 28.1623 23.3756C28.1432 23.3964 28.1342 23.4005 28.1341 23.4006C28.1337 23.4008 28.1187 23.4096 28.0765 23.4169C28.0324 23.4245 27.9471 23.4324 27.8125 23.4169C27.5361 23.385 27.076 23.256 26.4517 22.8806L23.3603 28.023C25.6919 29.4246 28.5236 30.0162 30.9967 28.6737C33.5 27.3148 34.5 24.5966 34.5 21.8818H28.5ZM26.4466 22.8776L23.6746 21.2186L20.5934 26.367L23.3654 28.026L26.4466 22.8776ZM23.6775 21.2203C22.7951 20.6909 21.8218 20.5093 21 20.5093C20.1782 20.5093 19.2049 20.6909 18.3225 21.2203L21.4095 26.3653C21.27 26.4489 21.1627 26.4815 21.1112 26.4941C21.0569 26.5074 21.0212 26.5093 21 26.5093C20.9788 26.5093 20.9431 26.5074 20.8888 26.4941C20.8373 26.4815 20.73 26.4489 20.5905 26.3653L23.6775 21.2203ZM18.3254 21.2186L15.5534 22.8776L18.6346 28.026L21.4066 26.367L18.3254 21.2186ZM15.5593 22.8741C14.9339 23.2464 14.4714 23.3756 14.1911 23.4076C14.0546 23.4231 13.9675 23.4153 13.9218 23.4074C13.878 23.3998 13.8621 23.3907 13.8614 23.3903C13.8611 23.3901 13.8526 23.3863 13.8343 23.3664C13.8147 23.3452 13.7733 23.2938 13.7247 23.1924C13.6245 22.9833 13.5 22.5704 13.5 21.8818H7.5C7.5 24.5986 8.50171 27.3133 11.0078 28.6683C13.4758 30.0026 16.3011 29.4153 18.6287 28.0295L15.5593 22.8741ZM13.5 21.8818V0.923885H7.5V21.8818H13.5Z" fill="var(--text-color)" mask="url(#path-2-inside-1_90_309)"/>
    //     <path d="M27.3 40.5H14.7C9.59794 40.5 6.41672 39.4704 4.47316 37.5268C2.5296 35.5833 1.5 32.4021 1.5 27.3V14.7C1.5 9.59794 2.5296 6.41672 4.47316 4.47316C6.41672 2.5296 9.59794 1.5 14.7 1.5H27.3C32.4021 1.5 35.5833 2.5296 37.5268 4.47316C39.4704 6.41672 40.5 9.59794 40.5 14.7V27.3C40.5 32.4021 39.4704 35.5833 37.5268 37.5268C35.5833 39.4704 32.4021 40.5 27.3 40.5Z" stroke="var(--text-color)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    //     <mask id="path-5-inside-2_90_309" fill="white">
    //     <path d="M31.5 0.923885V21.8818C31.5 26.0188 28.539 27.6358 24.906 25.4518L22.134 23.7928C21.504 23.4148 20.496 23.4148 19.866 23.7928L17.094 25.4518C13.461 27.6148 10.5 26.0188 10.5 21.8818V0.923885"/>
    //     </mask>
    //     <path d="M34.5 0.923885C34.5 -0.732969 33.1569 -2.07611 31.5 -2.07611C29.8431 -2.07611 28.5 -0.732969 28.5 0.923885H34.5ZM24.906 25.4518L26.4517 22.8806L26.4466 22.8776L24.906 25.4518ZM22.134 23.7928L20.5905 26.3653L20.5934 26.367L22.134 23.7928ZM19.866 23.7928L21.4066 26.367L21.4095 26.3653L19.866 23.7928ZM17.094 25.4518L18.6287 28.0295L18.6346 28.026L17.094 25.4518ZM13.5 0.923885C13.5 -0.732969 12.1569 -2.07611 10.5 -2.07611C8.84315 -2.07611 7.5 -0.732969 7.5 0.923885H13.5ZM28.5 0.923885V21.8818H34.5V0.923885H28.5ZM28.5 21.8818C28.5 22.5703 28.3755 22.9857 28.2741 23.1978C28.2249 23.3007 28.1827 23.3534 28.1623 23.3756C28.1432 23.3964 28.1342 23.4005 28.1341 23.4006C28.1337 23.4008 28.1187 23.4096 28.0765 23.4169C28.0324 23.4245 27.9471 23.4324 27.8125 23.4169C27.5361 23.385 27.076 23.256 26.4517 22.8806L23.3603 28.023C25.6919 29.4246 28.5236 30.0162 30.9967 28.6737C33.5 27.3148 34.5 24.5966 34.5 21.8818H28.5ZM26.4466 22.8776L23.6746 21.2186L20.5934 26.367L23.3654 28.026L26.4466 22.8776ZM23.6775 21.2203C22.7951 20.6909 21.8218 20.5093 21 20.5093C20.1782 20.5093 19.2049 20.6909 18.3225 21.2203L21.4095 26.3653C21.27 26.4489 21.1627 26.4815 21.1112 26.4941C21.0569 26.5074 21.0212 26.5093 21 26.5093C20.9788 26.5093 20.9431 26.5074 20.8888 26.4941C20.8373 26.4815 20.73 26.4489 20.5905 26.3653L23.6775 21.2203ZM18.3254 21.2186L15.5534 22.8776L18.6346 28.026L21.4066 26.367L18.3254 21.2186ZM15.5593 22.8741C14.9339 23.2464 14.4714 23.3756 14.1911 23.4076C14.0546 23.4231 13.9675 23.4153 13.9218 23.4074C13.878 23.3998 13.8621 23.3907 13.8614 23.3903C13.8611 23.3901 13.8526 23.3863 13.8343 23.3664C13.8147 23.3452 13.7733 23.2938 13.7247 23.1924C13.6245 22.9833 13.5 22.5704 13.5 21.8818H7.5C7.5 24.5986 8.50171 27.3133 11.0078 28.6683C13.4758 30.0026 16.3011 29.4153 18.6287 28.0295L15.5593 22.8741ZM13.5 21.8818V0.923885H7.5V21.8818H13.5Z" fill="var(--text-color)" mask="url(#path-5-inside-2_90_309)"/>
    //     </svg>
    // )

    // const bookmarkClicked = (
    //     <svg width={isMobile ? '32' : '42'} height={isMobile ? '32' : '42'} viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    //     <path d="M42.0004 12.2008V29.7989C42.0004 36.54 36.5404 42 29.7993 42H12.2011C5.46005 42 0 36.54 0 29.7989V12.2008C0 6.97172 2.14202 3.17068 5.94306 1.32266C7.32907 0.650654 8.92509 1.70066 8.92509 3.23368V21.8818C8.92509 24.3808 9.8911 26.3758 11.6341 27.3839C13.3981 28.3709 15.6242 28.1609 17.8922 26.7959L20.6222 25.1578C20.7902 25.0738 21.2102 25.0738 21.3362 25.1368L24.1082 26.7959C25.6203 27.6989 26.9223 27.9929 27.9723 27.9929C29.0643 27.9929 29.9043 27.6569 30.4083 27.3629C32.1093 26.3759 33.0753 24.3808 33.0753 21.8818V3.23368C33.0753 1.70066 34.6923 0.650654 36.0574 1.32266C39.8584 3.17068 42.0004 6.97172 42.0004 12.2008Z" fill="var(--text-color)"/>
    //     <path d="M27.8244 0C28.9794 0 29.9244 0.94501 29.9244 2.10002V21.8822C29.9244 23.2262 29.5254 24.2342 28.8324 24.6332C28.1184 25.0533 26.9844 24.8433 25.7244 24.0872L22.9523 22.4282C21.8813 21.7772 20.1173 21.7772 19.0463 22.4282L16.2743 24.0872C15.0142 24.8433 13.8802 25.0323 13.1662 24.6332C12.4732 24.2342 12.0742 23.2262 12.0742 21.8822V2.10002C12.0742 0.94501 13.0192 0 14.1742 0H27.8244Z" fill="var(--text-color)"/>
    //     </svg>
    // )

    return (
        <div onClick={bookmarkHandler} css={btnWrapperCSS({isMobile})}>
            <UseAnimations fillColor={'var(--text-color)'} strokeColor={'var(--text-color)'} animation={bookmark} reverse={bookmarkValue} size={50} />
            {/* {bookmarkValue ? bookmarkClicked : bookmarkNotClicked} */}
        </div>
    )
}

export const HasBeenReadToggle = ({isClicked, bookId}: ToggleBtnProps) => {
    const [isDeskTop, isTablet, isMobile] = useIsResponsive();
    const [hasBeenReadValue, setHasBeenReadValue] = useState<boolean>(isClicked)

    const hasBeenReadHandler = () => {
        putHasBeenRead({bookId})
        .then((res) => {
            if (res !== null) {
                setHasBeenReadValue(() => res)
            }
        })
    }

    // const checkboxNotClicked = (
    //     <svg width={isMobile ? '32' : '42'} height={isMobile ? '32' : '42'} viewBox="0 0 43 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    //     <path d="M21.0215 42C9.4373 42 0.0214844 32.5842 0.0214844 21C0.0214844 9.41581 9.4373 0 21.0215 0C32.6057 0 42.0215 9.41581 42.0215 21C42.0215 32.5842 32.6057 42 21.0215 42ZM21.0215 2.93023C11.0587 2.93023 2.95172 11.0372 2.95172 21C2.95172 30.9628 11.0587 39.0698 21.0215 39.0698C30.9843 39.0698 39.0913 30.9628 39.0913 21C39.0913 11.0372 30.9843 2.93023 21.0215 2.93023Z" fill="var(--text-color)"/>
    //     <path d="M18.2465 27.9937C17.8558 27.9937 17.4847 27.8374 17.2112 27.5639L11.6827 22.0355C11.1162 21.469 11.1162 20.5314 11.6827 19.9648C12.2492 19.3983 13.1869 19.3983 13.7534 19.9648L18.2465 24.4579L28.2874 14.4169C28.854 13.8504 29.7916 13.8504 30.3581 14.4169C30.9247 14.9834 30.9247 15.9211 30.3581 16.4876L19.2819 27.5639C19.0084 27.8374 18.6372 27.9937 18.2465 27.9937Z" fill="var(--text-color)"/>
    //     </svg>
    // )
    
    // const checkboxClicked = (
    //     <svg width={isMobile ? '32' : '42'} height={isMobile ? '32' : '42'} viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    //     <path d="M21 0C9.429 0 0 9.429 0 21C0 32.571 9.429 42 21 42C32.571 42 42 32.571 42 21C42 9.429 32.571 0 21 0ZM31.038 16.17L19.131 28.077C18.837 28.371 18.438 28.539 18.018 28.539C17.598 28.539 17.199 28.371 16.905 28.077L10.962 22.134C10.353 21.525 10.353 20.517 10.962 19.908C11.571 19.299 12.579 19.299 13.188 19.908L18.018 24.738L28.812 13.944C29.421 13.335 30.429 13.335 31.038 13.944C31.647 14.553 31.647 15.54 31.038 16.17Z" fill="var(--text-color)"/>
    //     </svg>
    // )

    return (
        <div onClick={hasBeenReadHandler} css={btnWrapperCSS({isMobile})}>
            {/* {hasBeenReadValue ? checkboxClicked : checkboxNotClicked} */}
            <UseAnimations key={`hasBeenRead-${hasBeenReadValue}`} strokeColor={'var(--text-color)'} animation={radioButton} reverse={hasBeenReadValue} size={48} />
            <span css={css`margin-left: 14px;`}>{hasBeenReadValue ? '읽음' : '읽지 않음'}</span>
            
        </div>
    )
}


export const CommentBtn = ({bookId, stateHandler}: {bookId: number, stateHandler: any}) => {
    const [isDeskTop, isTablet, isMobile] = useIsResponsive();

    const comment = (
        <svg css={css`margin-right: 8px;`} width={isMobile ? '32' : '32'} height={isMobile ? '32' : '32'} viewBox="0 0 43 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M31.5158 0H10.5053C4.70635 0 0 4.68534 0 10.4632V23.0275V25.1286C0 30.9065 4.70635 35.5918 10.5053 35.5918H13.6568C14.2241 35.5918 14.9805 35.97 15.3377 36.4322L18.4892 40.6133C19.8759 42.4622 22.1451 42.4622 23.5318 40.6133L26.6833 36.4322C27.0825 35.907 27.7129 35.5918 28.3642 35.5918H31.5158C37.3147 35.5918 42.021 30.9065 42.021 25.1286V10.4632C42.021 4.68534 37.3147 0 31.5158 0ZM12.6063 21.0105C11.4297 21.0105 10.5053 20.065 10.5053 18.9095C10.5053 17.7539 11.4507 16.8084 12.6063 16.8084C13.7619 16.8084 14.7074 17.7539 14.7074 18.9095C14.7074 20.065 13.7829 21.0105 12.6063 21.0105ZM21.0105 21.0105C19.8339 21.0105 18.9095 20.065 18.9095 18.9095C18.9095 17.7539 19.8549 16.8084 21.0105 16.8084C22.1661 16.8084 23.1116 17.7539 23.1116 18.9095C23.1116 20.065 22.1871 21.0105 21.0105 21.0105ZM29.4147 21.0105C28.2381 21.0105 27.3137 20.065 27.3137 18.9095C27.3137 17.7539 28.2591 16.8084 29.4147 16.8084C30.5703 16.8084 31.5158 17.7539 31.5158 18.9095C31.5158 20.065 30.5913 21.0105 29.4147 21.0105Z" fill="var(--text-color)"/>
        </svg>
    )

    const onClickStateHandler = () => {
        stateHandler(() => true)
    }
    return (
        <div css={btnWrapperCSS({isMobile})} onClick={onClickStateHandler}>
            {comment}
        </div>
    )
}

const btnWrapperCSS = ({isMobile} : {isMobile: boolean}) => {
    return css`
        margin-right: ${isMobile ? '6px' : '6px'};
        margin-bottom: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    `
}



const iconColor = css`
    color: var(--text-color);
`
