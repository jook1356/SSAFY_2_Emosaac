(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{679:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mypage/edit",function(){return e(5548)}])},5548:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return ne}});var r=e(5893),o=e(7297),i=e(4288),l=e(917),c=e(7908);async function a(n,t){try{let e={};t&&(e.Authorization=t);let{data:r}=await c.EC.get("/users/nickname/".concat(n),{headers:e});return r.data}catch(n){throw n}}async function u(n){try{let t=function(n){let t=new FormData;return t.append("nickName",n.nickName),null!==n.gender&&void 0!==n.gender&&t.append("gender",n.gender.toString()),null!==n.age&&void 0!==n.age&&t.append("age",n.age.toString()),null!==n.file&&("string"==typeof n.file?t.append("existingImageUrl",n.file):t.append("file",n.file)),t}(n),e=await c.ZX.put("/users",t);return e.data}catch(n){throw n}}var d=e(7294),s=e(6511),p=e(1163);function g(){let n=(0,o.Z)(["\n  color: var(--text-color);\n  display: flex;\n  min-height: 400px; // 변경된 부분\n  flex-direction: column;\n  justify-content: space-between;\n  width: 400px;\n  padding: 45px;\n  border-radius: 5px;\n  margin: 20px auto;\n  border: 1px solid var(--border-color);\n"]);return g=function(){return n},n}function f(){let n=(0,o.Z)(["\n  text-align: left;\n  margin-bottom: 70px;\n"]);return f=function(){return n},n}function h(){let n=(0,o.Z)(["\n  position: relative;\n  margin-top: 30px;\n"]);return h=function(){return n},n}function v(){let n=(0,o.Z)(["\n  display: flex;\n"]);return v=function(){return n},n}function m(){let n=(0,o.Z)(["\n  margin-left: 2px;\n  margin-top: 10px;\n  font-size: 10px;\n"]);return m=function(){return n},n}function x(){let n=(0,o.Z)(["\n  position: absolute;\n  cursor: pointer;\n  color: var(--main-color);\n  border: 1px solid var(--border-color);\n  background-color: var(--back-color);\n  border-radius: 5px;\n  padding: 3px 3px;\n  /* color :  */\n  border: none;\n  bottom: 5px;\n  right: 0px;\n"]);return x=function(){return n},n}function b(){let n=(0,o.Z)(["\n  width: 150px;\n  height: 150px;\n  /* img태그 위에 auto를 주어야 바뀜 */\n  margin: 0 auto;\n"]);return b=function(){return n},n}function Z(){let n=(0,o.Z)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 100%;\n  cursor: pointer;\n"]);return Z=function(){return n},n}function k(){let n=(0,o.Z)(["\n  border: none;\n  border-bottom: 3px solid var(--main-color);\n  margin-top: 10px;\n  width: 100%;\n  :focus {\n    outline: none;\n  }\n  ::placeholder {\n    color: var(--text-color);\n    font-weight: bold;\n  }\n  background-color: var(--back-color);\n  color: var(--text-color);\n"]);return k=function(){return n},n}function S(){let n=(0,o.Z)(["\n  position: relative;\n  display: inline-block;\n"]);return S=function(){return n},n}function w(){let n=(0,o.Z)(["\n  background-color: var(--back-color);\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  padding: 8px 12px;\n  cursor: pointer;\n  height: auto; /* height를 auto로 설정하여 내용물에 따라 높이가 자동 조절되도록 합니다. */\n  white-space: nowrap; /* 글자가 한 줄로 표시되도록 합니다. */\n"]);return w=function(){return n},n}function y(){let n=(0,o.Z)(["\n  position: absolute;\n  background-color: var(--back-color);\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  padding: 5px;\n  z-index: 1;\n  transition: opacity 0.3s ease, transform 0.5s ease; /* 애니메이션 추가 */\n  opacity: ",";\n  visibility: ",";\n  transform: translateY(","px);\n  width: 55%;\n  color: var(--text-color);\n"]);return y=function(){return n},n}function C(){let n=(0,o.Z)(["\n  padding: 5px;\n  cursor: pointer;\n  color: var(--text-color);\n  &:hover {\n    background-color: var(--back-color);\n  }\n"]);return C=function(){return n},n}function I(){let n=(0,o.Z)(["\n  margin-top: 20px;\n"]);return I=function(){return n},n}function _(){let n=(0,o.Z)(["\n  border: none;\n  /* border-bottom: 3px solid var(--main-color); */\n  padding-bottom: 1px;\n"]);return _=function(){return n},n}function X(){let n=(0,o.Z)(["\n  cursor: pointer;\n  width: 60px;\n  height: 30px;\n  border-radius: 5px;\n  margin-top: 10px;\n  margin-right: 3px;\n  background-color: ",";\n  color: var(--text-color);\n"]);return X=function(){return n},n}function N(){let n=(0,o.Z)(["\n  margin-top: 20px;\n"]);return N=function(){return n},n}function B(){let n=(0,o.Z)(["\n  border: none;\n  /* border-bottom: 3px solid var(--main-color); */\n  padding-bottom: 1px;\n"]);return B=function(){return n},n}function E(){let n=(0,o.Z)(["\n  margin-left: 2px;\n  margin-top: 6px;\n  font-size: 10px;\n"]);return E=function(){return n},n}function D(){let n=(0,o.Z)(["\n  height: 30px;\n"]);return D=function(){return n},n}function U(){let n=(0,o.Z)(["\n  cursor: pointer;\n  margin-top: 25px;\n  width: 100%;\n  height: 100%;\n  border-radius: 5px;\n  background-color: var(--main-color);\n"]);return U=function(){return n},n}let F=n=>{let{myInfo:t}=n,e=(0,p.useRouter)(),r=(0,c.LP)(),[o,l]=(0,d.useState)(""),[g,f]=(0,d.useState)(!1),[h,v]=(0,d.useState)(""),[m,x]=(0,d.useState)(""),[b,Z]=(0,d.useState)(null),[k,S]=(0,d.useState)(localStorage.getItem("age")?parseInt(localStorage.getItem("age")):null),[w,y]=(0,d.useState)(null),[C,I]=(0,d.useState)(null==t?void 0:t.imageUrl),[_,X]=(0,d.useState)(!1),[N,B]=(0,d.useState)(null),E=n=>{var e;let r=null===(e=n.target.files)||void 0===e?void 0:e[0];if(r){y(r);let n=new FileReader;n.onloadend=()=>{I(n.result)},n.readAsDataURL(r)}else I(null==t?void 0:t.imageUrl)};(0,d.useEffect)(()=>{if(w){let n=new FileReader;n.onloadend=()=>{I(n.result)},n.readAsDataURL(w)}else I(null==t?void 0:t.imageUrl)},[w,null==t?void 0:t.imageUrl]);let D=n=>{Z(n)},U=async n=>{n.preventDefault();let t=localStorage.getItem("age")?parseInt(localStorage.getItem("age")):null;if(""===localStorage.getItem("nickName")||""===localStorage.getItem("age")||localStorage.getItem("gender"),!o){alert("닉네임을 입력해주세요.");return}if(!g){alert("닉네임 중복확인을 해주세요");return}if(!k){alert("연령대를 선택해주세요.");return}if(null===b){alert("성별을 선택해주세요.");return}try{localStorage.setItem("age",(null==k?void 0:k.toString())||""),localStorage.setItem("nickname",null==o?void 0:o.toString()),localStorage.setItem("gender",(null==b?void 0:b.toString())||""),await u({file:w,gender:b,age:t,nickName:o}),alert("수정되었어요"),e.push("/mypage")}catch(n){console.log(n)}},F=n=>{l(n.target.value)},ne=()=>{if(!o){alert("닉네임을 입력해주세요!");return}a(o,r).then(n=>{!1===n?(v("사용 가능한 닉네임이에요"),f(!0)):(v("사용이 불가능한 닉네임이에요"),f(!1))})},nr=n=>{S(n),B(n),X(!1)};return(0,d.useEffect)(()=>{(0,s.Z)().then(n=>{null!==n&&(l(n.nickname),0===n.gender?Z(0):Z(1),n.age&&B(n.age))})},[]),(0,i.tZ)(i.HY,{children:(0,i.tZ)("section",{children:(0,i.BX)("form",{action:"",css:R,onSubmit:U,children:[(0,i.tZ)("article",{css:z,children:(0,i.tZ)("h2",{children:"회원정보수정"})}),(0,i.tZ)("div",{children:(0,i.tZ)("div",{css:O,children:(0,i.BX)("label",{htmlFor:"profileImage",children:[(0,i.tZ)("img",{css:T,src:C||"/assets/default_image.png",alt:"프로필 이미지"}),(0,i.tZ)("input",{type:"file",id:"profileImage",accept:"image/*",onChange:E,style:{display:"none"}})]})})}),(0,i.BX)("div",{css:j,children:[(0,i.BX)("label",{htmlFor:"",css:A,children:[(0,i.tZ)("h3",{children:"닉네임"}),(0,i.tZ)("div",{css:L,children:"2글자 ~ 10글자 사이로 입력해주세요"})]}),(0,i.tZ)("input",{css:Y,type:"text",placeholder:o||"닉네임을 입력해주세요",value:o,onChange:F}),(0,i.tZ)("button",{css:P,onClick:ne,type:"button",children:"중복확인"})]}),(0,i.tZ)("div",{children:h}),(0,i.BX)("div",{css:K,children:[(0,i.tZ)("h3",{css:M,children:"성별"}),(0,i.tZ)("button",{onClick:n=>{n.preventDefault(),D(0)},css:Q(0,b),children:"남성"}),(0,i.tZ)("button",{onClick:n=>{n.preventDefault(),D(1)},css:Q(1,b),children:"여성"})]}),(0,i.BX)("div",{css:V,children:[(0,i.tZ)("h3",{css:W,children:"연령대"}),(0,i.tZ)("div",{css:$,children:"연령대에 맞게 추천을 해드려요!"})]}),(0,i.BX)("div",{css:H,children:[(0,i.tZ)("button",{css:q,onClick:n=>{X(!_),n.preventDefault()},children:(0,i.tZ)("div",{children:N?"".concat(N,"대"):"연령대를 선택해주세요"})}),(0,i.BX)("div",{css:G(_),children:[(0,i.tZ)("div",{onClick:()=>nr(null),css:J,children:"연령대를 선택해주세요"}),(0,i.tZ)("div",{onClick:()=>nr(10),css:J,children:"10대"}),(0,i.tZ)("div",{onClick:()=>nr(20),css:J,children:"20대"}),(0,i.tZ)("div",{onClick:()=>nr(30),css:J,children:"30대"}),(0,i.tZ)("div",{onClick:()=>nr(40),css:J,children:"40대"}),(0,i.tZ)("div",{onClick:()=>nr(50),css:J,children:"50대"}),(0,i.tZ)("div",{onClick:()=>nr(60),css:J,children:"60대 이상"})]})]}),(0,i.tZ)("div",{css:nn,children:(0,i.tZ)("button",{type:"submit",css:nt,children:"정보 수정"})})]})})})},R=(0,l.iv)(g()),z=(0,l.iv)(f()),j=(0,l.iv)(h()),A=(0,l.iv)(v()),L=(0,l.iv)(m()),P=(0,l.iv)(x()),O=(0,l.iv)(b()),T=(0,l.iv)(Z()),Y=(0,l.iv)(k()),H=(0,l.iv)(S()),q=(0,l.iv)(w()),G=n=>(0,l.iv)(y(),n?1:0,n?"visible":"hidden",n?0:-10),J=(0,l.iv)(C()),K=(0,l.iv)(I()),M=(0,l.iv)(_()),Q=(n,t)=>(0,l.iv)(X(),n===t?"var(--main-color)":"var(--back-color)"),V=(0,l.iv)(N()),W=(0,l.iv)(B()),$=(0,l.iv)(E()),nn=(0,l.iv)(D()),nt=(0,l.iv)(U());function ne(n){let{myInfo:t}=n;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F,{myInfo:t})})}}},function(n){n.O(0,[774,888,179],function(){return n(n.s=679)}),_N_E=n.O()}]);